const _0x3fc55e=_0x3d14;(function(_0x446406,_0x594ac){const _0x3789e4=_0x3d14,_0x63fe80=_0x446406();while(!![]){try{const _0x5a0e91=-parseInt(_0x3789e4(0x143))/0x1*(parseInt(_0x3789e4(0x12d))/0x2)+-parseInt(_0x3789e4(0x13c))/0x3*(-parseInt(_0x3789e4(0x150))/0x4)+parseInt(_0x3789e4(0x12b))/0x5*(-parseInt(_0x3789e4(0x14a))/0x6)+parseInt(_0x3789e4(0x142))/0x7*(-parseInt(_0x3789e4(0x134))/0x8)+parseInt(_0x3789e4(0x14d))/0x9+parseInt(_0x3789e4(0x139))/0xa*(-parseInt(_0x3789e4(0x12f))/0xb)+-parseInt(_0x3789e4(0x141))/0xc*(-parseInt(_0x3789e4(0x123))/0xd);if(_0x5a0e91===_0x594ac)break;else _0x63fe80['push'](_0x63fe80['shift']());}catch(_0x85e1f1){_0x63fe80['push'](_0x63fe80['shift']());}}}(_0x36bc,0x1b62b));function getRandomInt(_0x3081ca,_0x213eaa){const _0x7f6f=_0x3d14;return _0x3081ca=Math[_0x7f6f(0x12e)](_0x3081ca),_0x213eaa=Math[_0x7f6f(0x154)](_0x213eaa),Math[_0x7f6f(0x154)](Math[_0x7f6f(0x13d)]()*(_0x213eaa-_0x3081ca+0x1))+_0x3081ca;}function generateSequence(){const _0x3846fa=_0x3d14,_0x3178c8=['I','J','L','O','S','T','Z'];while(_0x3178c8[_0x3846fa(0x149)]){const _0x37f544=getRandomInt(0x0,_0x3178c8['length']-0x1),_0x59de09=_0x3178c8[_0x3846fa(0x11e)](_0x37f544,0x1)[0x0];tetrominoSequence[_0x3846fa(0x144)](_0x59de09);}}function ensureSequence(){const _0x826bb9=_0x3d14;while(tetrominoSequence[_0x826bb9(0x149)]<0xe){generateSequence();}}function getNextTetromino(){const _0x31c477=_0x3d14;ensureSequence();const _0x2023b9=tetrominoSequence[_0x31c477(0x14e)](),_0x5bca77=tetrominos[_0x2023b9],_0xd6dafe=playfield[0x0][_0x31c477(0x149)]/0x2-Math[_0x31c477(0x12e)](_0x5bca77[0x0][_0x31c477(0x149)]/0x2),_0x320e2d=_0x2023b9==='I'?-0x1:-0x2;return{'name':_0x2023b9,'matrix':_0x5bca77,'row':_0x320e2d,'col':_0xd6dafe};}function rotate(_0x44cc4c){const _0x21f988=_0x3d14,_0x571b32=_0x44cc4c[_0x21f988(0x149)]-0x1,_0x30c8e6=_0x44cc4c[_0x21f988(0x130)]((_0x53d8a4,_0x560a00)=>_0x53d8a4['map']((_0x214860,_0x3dc05f)=>_0x44cc4c[_0x571b32-_0x3dc05f][_0x560a00]));return _0x30c8e6;}function rotateCounterclockwise(_0x3d41b2){const _0x468f9c=_0x3d14,_0x15de7f=_0x3d41b2[_0x468f9c(0x149)]-0x1,_0x50ff0d=_0x3d41b2['map']((_0x4da77f,_0x556f24)=>_0x4da77f[_0x468f9c(0x130)]((_0x23b102,_0x5bf5f9)=>_0x3d41b2[_0x5bf5f9][_0x15de7f-_0x556f24]));return _0x50ff0d;}function isValidMove(_0x2be34b,_0x18196c,_0xbc9b20){const _0xd791d2=_0x3d14;for(let _0x3e439b=0x0;_0x3e439b<_0x2be34b['length'];_0x3e439b++){for(let _0x324f86=0x0;_0x324f86<_0x2be34b[_0x3e439b][_0xd791d2(0x149)];_0x324f86++){if(_0x2be34b[_0x3e439b][_0x324f86]&&(_0xbc9b20+_0x324f86<0x0||_0xbc9b20+_0x324f86>=playfield[0x0][_0xd791d2(0x149)]||_0x18196c+_0x3e439b>=playfield[_0xd791d2(0x149)]||playfield[_0x18196c+_0x3e439b][_0xbc9b20+_0x324f86]))return![];}}return!![];}function _0x36bc(){const _0x5c0734=['fillStyle','game','108975dYnEJa','random','beginPath','every','black','201540FbiMAS','19481zaPBjV','53Jumpnq','push','lineTo','lineWidth','getElementById','row','length','88278ZKxpKM','hold-piece','next-pieces','393129AimLEY','pop','yellow','4fKoIHl','GAME\x20OVER!','textAlign','gray','floor','textBaseline','splice','name','globalAlpha','moveTo','font','247YKbQcw','height','col','36px\x20monospace','fillRect','cyan','clearRect','width','55etEaoY','matrix','3580OENZfE','ceil','407qjxJkS','map','which','center','orange','72uyzfhb','rgba(255,\x20255,\x20255,\x200.3)','blue','getContext','addEventListener','1400cBQflv'];_0x36bc=function(){return _0x5c0734;};return _0x36bc();}function placeTetromino(){const _0x19b901=_0x3d14;for(let _0xbd8376=0x0;_0xbd8376<tetromino[_0x19b901(0x12c)][_0x19b901(0x149)];_0xbd8376++){for(let _0x5bf4ad=0x0;_0x5bf4ad<tetromino[_0x19b901(0x12c)][_0xbd8376][_0x19b901(0x149)];_0x5bf4ad++){if(tetromino['matrix'][_0xbd8376][_0x5bf4ad]){if(tetromino[_0x19b901(0x148)]+_0xbd8376<0x0)return showGameOver();playfield[tetromino['row']+_0xbd8376][tetromino[_0x19b901(0x125)]+_0x5bf4ad]=tetromino[_0x19b901(0x11f)];}}}for(let _0x4164e6=playfield[_0x19b901(0x149)]-0x1;_0x4164e6>=0x0;){if(playfield[_0x4164e6][_0x19b901(0x13f)](_0x563fc6=>!!_0x563fc6))for(let _0x4715ab=_0x4164e6;_0x4715ab>=0x0;_0x4715ab--){for(let _0x31b5ed=0x0;_0x31b5ed<playfield[_0x4715ab]['length'];_0x31b5ed++){playfield[_0x4715ab][_0x31b5ed]=playfield[_0x4715ab-0x1][_0x31b5ed];}}else _0x4164e6--;}tetromino=getNextTetromino(),canHold=!![];}function showGameOver(){const _0x15e407=_0x3d14;cancelAnimationFrame(rAF),gameOver=!![],context[_0x15e407(0x13a)]=_0x15e407(0x140),context[_0x15e407(0x120)]=0.75,context[_0x15e407(0x127)](0x0,canvas[_0x15e407(0x124)]/0x2-0x1e,canvas[_0x15e407(0x12a)],0x3c),context[_0x15e407(0x120)]=0x1,context[_0x15e407(0x13a)]='white',context[_0x15e407(0x122)]=_0x15e407(0x126),context[_0x15e407(0x152)]=_0x15e407(0x132),context[_0x15e407(0x11d)]='middle',context['fillText'](_0x15e407(0x151),canvas[_0x15e407(0x12a)]/0x2,canvas[_0x15e407(0x124)]/0x2);}const canvas=document['getElementById'](_0x3fc55e(0x13b)),context=canvas[_0x3fc55e(0x137)]('2d'),holdPieceCanvas=document[_0x3fc55e(0x147)](_0x3fc55e(0x14b)),holdPieceContext=holdPieceCanvas['getContext']('2d'),nextPiecesCanvas=document[_0x3fc55e(0x147)](_0x3fc55e(0x14c)),nextPiecesContext=nextPiecesCanvas[_0x3fc55e(0x137)]('2d'),grid=0x20,tetrominoSequence=[],playfield=[];for(let row=-0x2;row<0x14;row++){playfield[row]=[];for(let col=0x0;col<0xa;col++){playfield[row][col]=0x0;}}const tetrominos={'I':[[0x0,0x0,0x0,0x0],[0x1,0x1,0x1,0x1],[0x0,0x0,0x0,0x0],[0x0,0x0,0x0,0x0]],'J':[[0x1,0x0,0x0],[0x1,0x1,0x1],[0x0,0x0,0x0]],'L':[[0x0,0x0,0x1],[0x1,0x1,0x1],[0x0,0x0,0x0]],'O':[[0x1,0x1],[0x1,0x1]],'S':[[0x0,0x1,0x1],[0x1,0x1,0x0],[0x0,0x0,0x0]],'Z':[[0x1,0x1,0x0],[0x0,0x1,0x1],[0x0,0x0,0x0]],'T':[[0x0,0x1,0x0],[0x1,0x1,0x1],[0x0,0x0,0x0]]},colors={'I':_0x3fc55e(0x128),'O':_0x3fc55e(0x14f),'T':'purple','S':'green','Z':'red','J':_0x3fc55e(0x136),'L':_0x3fc55e(0x133)};function _0x3d14(_0x736d32,_0xb7b602){const _0x36bc2f=_0x36bc();return _0x3d14=function(_0x3d1422,_0x3626e5){_0x3d1422=_0x3d1422-0x11d;let _0x2ad4e1=_0x36bc2f[_0x3d1422];return _0x2ad4e1;},_0x3d14(_0x736d32,_0xb7b602);}let count=0x0,tetromino=getNextTetromino(),heldTetromino=null,canHold=!![],rAF=null,gameOver=![];function getGhostPosition(){const _0x193f28=_0x3fc55e;let _0x53b049=tetromino[_0x193f28(0x148)];while(isValidMove(tetromino[_0x193f28(0x12c)],_0x53b049+0x1,tetromino['col'])){_0x53b049++;}return _0x53b049;}function loop(){const _0x15e1af=_0x3fc55e;rAF=requestAnimationFrame(loop),context[_0x15e1af(0x129)](0x0,0x0,canvas[_0x15e1af(0x12a)],canvas[_0x15e1af(0x124)]),context['strokeStyle']=_0x15e1af(0x153),context[_0x15e1af(0x146)]=0x1;for(let _0x5e0bd4=0x0;_0x5e0bd4<0xa;_0x5e0bd4++){context[_0x15e1af(0x13e)](),context[_0x15e1af(0x121)](_0x5e0bd4*grid,0x0),context[_0x15e1af(0x145)](_0x5e0bd4*grid,canvas[_0x15e1af(0x124)]),context['stroke']();}for(let _0x11e8c8=0x0;_0x11e8c8<0x14;_0x11e8c8++){for(let _0x255529=0x0;_0x255529<0xa;_0x255529++){if(playfield[_0x11e8c8][_0x255529]){const _0x38fd18=playfield[_0x11e8c8][_0x255529];context[_0x15e1af(0x13a)]=colors[_0x38fd18],context[_0x15e1af(0x127)](_0x255529*grid,_0x11e8c8*grid,grid-0x1,grid-0x1);}}}const _0x76a73e=getGhostPosition();context[_0x15e1af(0x13a)]=_0x15e1af(0x135);for(let _0x2c9437=0x0;_0x2c9437<tetromino[_0x15e1af(0x12c)][_0x15e1af(0x149)];_0x2c9437++){for(let _0x40b91a=0x0;_0x40b91a<tetromino[_0x15e1af(0x12c)][_0x2c9437][_0x15e1af(0x149)];_0x40b91a++){tetromino[_0x15e1af(0x12c)][_0x2c9437][_0x40b91a]&&context[_0x15e1af(0x127)]((tetromino[_0x15e1af(0x125)]+_0x40b91a)*grid,(_0x76a73e+_0x2c9437)*grid,grid-0x1,grid-0x1);}}if(tetromino){++count>0x23&&(tetromino[_0x15e1af(0x148)]++,count=0x0,!isValidMove(tetromino['matrix'],tetromino[_0x15e1af(0x148)],tetromino[_0x15e1af(0x125)])&&(tetromino[_0x15e1af(0x148)]--,placeTetromino()));context[_0x15e1af(0x13a)]=colors[tetromino[_0x15e1af(0x11f)]];for(let _0x5efabe=0x0;_0x5efabe<tetromino['matrix'][_0x15e1af(0x149)];_0x5efabe++){for(let _0x569f1c=0x0;_0x569f1c<tetromino[_0x15e1af(0x12c)][_0x5efabe][_0x15e1af(0x149)];_0x569f1c++){tetromino[_0x15e1af(0x12c)][_0x5efabe][_0x569f1c]&&context[_0x15e1af(0x127)]((tetromino['col']+_0x569f1c)*grid,(tetromino[_0x15e1af(0x148)]+_0x5efabe)*grid,grid-0x1,grid-0x1);}}}holdPieceContext[_0x15e1af(0x129)](0x0,0x0,holdPieceCanvas[_0x15e1af(0x12a)],holdPieceCanvas[_0x15e1af(0x124)]);if(heldTetromino){holdPieceContext['fillStyle']=colors[heldTetromino[_0x15e1af(0x11f)]];for(let _0x4f5754=0x0;_0x4f5754<heldTetromino['matrix'][_0x15e1af(0x149)];_0x4f5754++){for(let _0x3e4575=0x0;_0x3e4575<heldTetromino[_0x15e1af(0x12c)][_0x4f5754][_0x15e1af(0x149)];_0x3e4575++){heldTetromino[_0x15e1af(0x12c)][_0x4f5754][_0x3e4575]&&holdPieceContext[_0x15e1af(0x127)](_0x3e4575*grid,_0x4f5754*grid,grid-0x1,grid-0x1);}}}nextPiecesContext[_0x15e1af(0x129)](0x0,0x0,nextPiecesCanvas[_0x15e1af(0x12a)],nextPiecesCanvas[_0x15e1af(0x124)]);for(let _0x15c01b=0x0;_0x15c01b<0x5;_0x15c01b++){if(tetrominoSequence[tetrominoSequence[_0x15e1af(0x149)]-0x1-_0x15c01b]){const _0x38a6cd=tetrominos[tetrominoSequence[tetrominoSequence['length']-0x1-_0x15c01b]];nextPiecesContext[_0x15e1af(0x13a)]=colors[tetrominoSequence[tetrominoSequence['length']-0x1-_0x15c01b]];for(let _0x2210e8=0x0;_0x2210e8<_0x38a6cd[_0x15e1af(0x149)];_0x2210e8++){for(let _0xc31be2=0x0;_0xc31be2<_0x38a6cd[_0x2210e8][_0x15e1af(0x149)];_0xc31be2++){_0x38a6cd[_0x2210e8][_0xc31be2]&&nextPiecesContext['fillRect'](_0xc31be2*grid,(_0x2210e8+_0x15c01b*0x4)*grid,grid-0x1,grid-0x1);}}}}}function holdTetromino(){const _0x1991a9=_0x3fc55e;if(!canHold)return;heldTetromino?([tetromino,heldTetromino]=[heldTetromino,tetromino],tetromino[_0x1991a9(0x148)]=heldTetromino['name']==='I'?-0x1:-0x2,tetromino[_0x1991a9(0x125)]=playfield[0x0][_0x1991a9(0x149)]/0x2-Math[_0x1991a9(0x12e)](tetromino[_0x1991a9(0x12c)][0x0][_0x1991a9(0x149)]/0x2)):(heldTetromino=tetromino,tetromino=getNextTetromino()),canHold=![];}document[_0x3fc55e(0x138)]('keydown',function(_0x2cdb75){const _0x2f7900=_0x3fc55e;if(gameOver)return;if(_0x2cdb75[_0x2f7900(0x131)]===0x41){const _0x6308f=tetromino[_0x2f7900(0x125)]-0x1;isValidMove(tetromino['matrix'],tetromino[_0x2f7900(0x148)],_0x6308f)&&(tetromino['col']=_0x6308f);}if(_0x2cdb75[_0x2f7900(0x131)]===0x44){const _0x46566f=tetromino[_0x2f7900(0x125)]+0x1;isValidMove(tetromino[_0x2f7900(0x12c)],tetromino['row'],_0x46566f)&&(tetromino['col']=_0x46566f);}if(_0x2cdb75[_0x2f7900(0x131)]===0x4b){const _0x1ccd5f=rotateCounterclockwise(tetromino[_0x2f7900(0x12c)]);isValidMove(_0x1ccd5f,tetromino[_0x2f7900(0x148)],tetromino['col'])&&(tetromino[_0x2f7900(0x12c)]=_0x1ccd5f);}if(_0x2cdb75[_0x2f7900(0x131)]===0xba){const _0x4f5f45=rotate(tetromino['matrix']);isValidMove(_0x4f5f45,tetromino[_0x2f7900(0x148)],tetromino[_0x2f7900(0x125)])&&(tetromino['matrix']=_0x4f5f45);}if(_0x2cdb75[_0x2f7900(0x131)]===0x53){const _0x372ddd=tetromino[_0x2f7900(0x148)]+0x1;if(!isValidMove(tetromino[_0x2f7900(0x12c)],_0x372ddd,tetromino['col'])){tetromino['row']=_0x372ddd-0x1,placeTetromino();return;}tetromino[_0x2f7900(0x148)]=_0x372ddd;}if(_0x2cdb75['which']===0x4c){const _0x54bdf2=getGhostPosition();tetromino[_0x2f7900(0x148)]=_0x54bdf2,placeTetromino();}_0x2cdb75[_0x2f7900(0x131)]===0xbe&&holdTetromino();}),rAF=requestAnimationFrame(loop);